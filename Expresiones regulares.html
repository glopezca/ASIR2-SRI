<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Guía Práctica para .htaccess</title>
</head>
<body style="font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; color: #333;">
    <header style="text-align: center; margin-bottom: 20px;">
        <h1 style="color: #444;">Guía Práctica de Expresiones Regulares y Configuración para .htaccess</h1>
        <p style="font-size: 1.1em;">Aprende a manejar expresiones regulares y configuraciones avanzadas en Apache</p>
    </header>
    
    <main>
        <section>
            <h2 style="color: #555;">1. Conceptos Básicos de Expresiones Regulares</h2>
            <ul>
                <li><strong>.</strong>: Coincide con cualquier carácter excepto un salto de línea.</li>
                <li><strong>^</strong>: Indica el inicio de una cadena.</li>
                <li><strong>$</strong>: Indica el final de una cadena.</li>
                <li><strong>*</strong>: Cero o más repeticiones.</li>
                <li><strong>+</strong>: Una o más repeticiones.</li>
                <li><strong>?</strong>: Cero o una repetición (opcional).</li>
                <li><strong>{n,m}</strong>: Entre <em>n</em> y <em>m</em> repeticiones.</li>
                <li><strong>[]</strong>: Define un conjunto de caracteres. Ejemplo: <code>[abc]</code> coincide con <strong>a</strong>, <strong>b</strong> o <strong>c</strong>.</li>
                <li><strong>|</strong>: Alternativa. Ejemplo: <code>a|b</code> coincide con <strong>a</strong> o <strong>b</strong>.</li>
                <li><strong>()</strong>: Agrupamiento para aplicar operadores o capturar coincidencias.</li>
            </ul>
        </section>

        <section>
            <h2 style="color: #555;">2. Uso de Expresiones con % en .htaccess</h2>
            <p>Apache permite usar variables especiales que comienzan con <code>%</code> para trabajar con valores dinámicos del entorno o el servidor.</p>
            <h3 style="color: #666;">Variables del Entorno Comunes</h3>
            <ul>
                <li><code>%{HTTP_HOST}</code>: Dominio en la solicitud.</li>
                <li><code>%{REQUEST_URI}</code>: Ruta y archivo solicitados (sin parámetros).</li>
                <li><code>%{QUERY_STRING}</code>: Parámetros en la URL (después de <code>?</code>).</li>
                <li><code>%{REMOTE_ADDR}</code>: Dirección IP del visitante.</li>
                <li><code>%{HTTP_USER_AGENT}</code>: Navegador del usuario.</li>
                <li><code>%{HTTPS}</code>: Indica si la solicitud usa HTTPS (<code>on</code> o vacío).</li>
            </ul>
        </section>

        <section>
            <h2 style="color: #555;">3. Ejemplos Prácticos de Configuración</h2>
            
            <h3 style="color: #666;">3.1 Redirección de HTTP a HTTPS</h3>
            <pre style="background: #f9f9f9; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1 [R=301,L]
            </pre>

            <h3 style="color: #666;">3.2 Bloquear Acceso por IP</h3>
            <pre style="background: #f9f9f9; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
RewriteEngine On
RewriteCond %{REMOTE_ADDR} ^192\.168\.1\.[0-9]+$
RewriteRule ^ - [F,L]
            </pre>

            <h3 style="color: #666;">3.3 Bloquear Acceso por Extensión</h3>
            <pre style="background: #f9f9f9; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
RewriteEngine On
RewriteRule \.(exe|bat|sh|php)$ - [F,L]
            </pre>

            <h3 style="color: #666;">3.4 Redirección de URLs Antiguas</h3>
            <pre style="background: #f9f9f9; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
RewriteEngine On
RewriteRule ^antigua-pagina\.html$ /nueva-pagina.html [R=301,L]
            </pre>

            <!-- Agregar ejemplos adicionales según la estructura -->
        </section>

        <section>
            <h2 style="color: #555;">4. Herramientas para Probar Expresiones Regulares</h2>
            <ul>
                <li><a href="https://regex101.com" target="_blank">Regex101</a>: Analizador interactivo para probar expresiones regulares.</li>
                <li><a href="https://htaccess.madewithlove.com/" target="_blank">htaccess Tester</a>: Herramienta para probar configuraciones .htaccess.</li>
            </ul>
        </section>
    </main>
</body>
</html>
