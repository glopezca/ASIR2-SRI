# Archivo `resolv.conf`

El archivo `resolv.conf` es un archivo de configuración clave en los sistemas basados en Unix/Linux, encargado de definir cómo se resuelven los nombres de dominio en la red. Es decir, especifica los servidores DNS que el sistema utilizará para resolver los nombres de dominio a direcciones IP.

---

## Ubicación del archivo

El archivo se encuentra normalmente en:

```bash
/etc/resolv.conf
```

---

## Función de `resolv.conf`

El archivo `resolv.conf` indica al sistema qué servidores DNS usar para traducir nombres de dominio (como `example.com`) en direcciones IP.  
El sistema consulta primero este archivo antes de hacer cualquier búsqueda DNS.

---

## Contenido típico de `resolv.conf`

Este archivo tiene un formato muy simple, con líneas que suelen tener la siguiente estructura:

```bash
nameserver 8.8.8.8
nameserver 8.8.4.4
search example.com
```

---

## Parámetros principales de `resolv.conf`

- **nameserver:**  
  Especifica las direcciones IP de los servidores DNS que el sistema usará para resolver los nombres de dominio.  
  Se pueden definir varios servidores DNS en diferentes líneas. El sistema intentará contactar con ellos en el orden en que aparecen.
  ```bash
  nameserver 8.8.8.8
  ```

- **search:**  
  Define un dominio de búsqueda que se añadirá automáticamente a los nombres de host que no sean completamente cualificados (FQDN).  
  Por ejemplo, si intentas resolver un nombre parcial como `servidor`, el sistema buscará `servidor.example.com`.
  ```bash
  search example.com
  ```

- **options:**  
  Configura opciones adicionales para el comportamiento del cliente resolver.  
  Un ejemplo es `timeout`, que especifica el tiempo que se esperará a una respuesta del servidor DNS antes de intentar el siguiente.
  ```bash
  options timeout:2
  ```

---

## Ejemplo completo de `resolv.conf`

Un ejemplo completo de un archivo `resolv.conf` podría ser:

```bash
# Servidores DNS
nameserver 1.1.1.1
nameserver 8.8.8.8

# Dominio de búsqueda
search example.com

# Opciones adicionales
options timeout:2
```

---

## Administración de `resolv.conf`

En muchos sistemas modernos, el archivo `/etc/resolv.conf` es gestionado automáticamente por servicios como **NetworkManager** o **systemd-resolved**.  
Estos servicios pueden sobrescribir este archivo basándose en la configuración de red o en la conexión activa en ese momento.

---

## Comandos útiles

- **Ver el contenido de `resolv.conf`:**
  ```bash
  cat /etc/resolv.conf
  ```

- **Ver el estado de la resolución con `systemd-resolved`:**
  ```bash
  systemd-resolve --status
  ```

---

## Problemas comunes

- **El archivo es sobrescrito constantemente:**  
  Si haces cambios manuales en `resolv.conf` y estos son revertidos, probablemente esté siendo gestionado por **NetworkManager** o **systemd-resolved**.  
  Modifica la configuración de esos servicios para que los cambios sean persistentes.

- **Error en la resolución de DNS:**  
  Si el sistema no puede resolver nombres de dominio, asegúrate de que `resolv.conf` esté correctamente configurado y que los servidores DNS definidos sean accesibles.
